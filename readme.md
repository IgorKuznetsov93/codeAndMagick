#Проект Code & Magick
Сущности описываемые приложением
Маг — Wizard, хранит в себе имя пользователя (автора мага) username, его avatar, цвет глаз eyesColor, цвет плаща coatColor

#Ресурсы 
Все ресурсы должны быть доступны по относительному адресу /api. 
Ресурсы должны позволять обращаться к ним всем клиентам при помощи механизма CORS. 
Если загрузили картинку, но валидация не прошла, то картинка не должна показываться и не должна быть доступна.

Формат данных
Все ресурсы должны поддерживать формат application/json с кодировкой utf-8.

Дополнительно
Ресурсы могут поддерживать формат данных text/html

```markdown
GET /api/wizards
```
Параметры:


|Параметры запроса|Обязательный|Описание|
|---|---|---|
|skip   | N | Кол-во элементов которое нужно пропустить перед показом страницы. Значение по умолчанию — 0 |
|limit      | N | Максимальное кол-во элементов на странице. Значение по умолчанию — 10 |


Коды ответов:

|Код ответа|Описание|
|---|---|
|200   | Всё хорошо|
|400      | Неверный запрос. Не указаны обязательные параметры, либо значение параметра неверно. См. тело ошибки |
|500   | Невозможно обработать запрос из-за серверной ошибки (см. логи сервера)|

```markdown
GET api/wizards/:username
```

Возвращает пользователя с полем username равному :username.

Параметры: Нет.

Код ответа:

Коды ответов:

|Код ответа|Описание|
|---|---|
|200   | Всё хорошо|
|404      | Пользователь не найден|
|500   | Невозможно обработать запрос из-за серверной ошибки (см. логи сервера)|

```markdown
POST api/wizards
```

Создаёт нового мага по переданным параметрам. Принимает на вход данные в формате application/json, multipart/form-data.

Все данные должны проверяться на корректность при загрузке. См. раздел Валидация входных данных. Если загрузили картинку (или картинки), но валидация не прошла, то картинка не должна показываться и не должна быть доступна.

Параметры: Нет.

Код ответа:

|Код ответа|Описание|
|---|---|
|200   | Всё хорошо|
|400      | Если произошла ошибка: данные не прошли валидацию, такой маг уже встречается и т.д.|
|500   | Невозможно обработать запрос из-за серверной ошибки (см. логи сервера)|


```markdown
GET api/wizards/:username/avatar
```

Возвращает avatar мага с username === :username

Параметры: Нет.

Код ответа:

|Код ответа|Описание|
|---|---|
|200   | Всё хорошо|
|400   | Маг с таким именем отсутствует|
|404   | Маг не имеет аватара|
|500   | Невозможно обработать запрос из-за серверной ошибки (см. логи сервера)|



#Некорректные запросы
Все методы, которые не поддерживаются приложением, должны возвращать корректный статус 501.

Все адреса по которым нет данных, должны возвращать корректный код ошибки 404.

Все ошибки со статусом >400 должны предоставлять в своём теле развёрнутое описание причин возникновения проблемы.

Ошибки >500 не должны раскрывать части исходного кода, стек вызовов, имена функций и т.д.

Формат ошибок:
```markdown
[
        {
          "error": "Internal Error",
                "errorMessage": "Server has fallen into unrecoverable problem."
        }
]
```
Пример ошибки валидации (400 Bad Request):
```markdown
[
        {
          "error": "Validation Error",
                "fieldName": "title",
                "errorMessage": "is required"
        },
        {
          "error": "Validation Error",
                "fieldName": "type",
                "errorMessage": "is required"
        }
]
```
Дополнительно
Отдавать тело ошибки в корректном виде в зависимости от значения заголовка Accept — text/html или application/json.

#Валидация входных данных
Все сохраняемые данные должны быть проверены на корректность и цельность перед записью в базу данных.

* username — обязательное текстовое поле, размером от 1 до 25 символов
* avatar — необязательное поле (тип файл), разрешается только файл типа картинка (image/jpg, image/png...)
* coatColor — обязательное текстовое поле, с одним из значений: 'rgb(101, 137, 164)', 'rgb(241, 43, 107)', 'rgb(146, 100, 161)', 'rgb(56, 159, 117)', 'rgb(215, 210, 55)', 'rgb(0, 0, 0)'
* eyeColor' — обязательное текстовое поле, с одним из значений: 'black', 'red', 'blue', 'yellow', 'green'
* fireballColor — обязательное текстовое поле, с одним из значений: '#ee4830', '#30a8ee', '#5ce6c0', '#e848d5', '#e6e848'
#Предлагаемые системы хранения данных
Анализ данных показывает, что все данные в приложении являются атомарными и не имеют ссылок между собой. Состав данных состоит в основном из текстовой информации — документа. На основе выше следующего было принято решение использовать документоориентированную базу данных MongoDB


